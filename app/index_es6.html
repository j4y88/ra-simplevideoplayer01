<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Simple Video Player</title>
    <link rel="stylesheet" href="./css/style.css">
    <script>
        
    class VideoPlayer extends Object {
      constructor(videoFigureTag,videoTag,sourceTag,getAllAnchors){
        super();
        this.videoFigureTag= videoFigureTag;
        this.videoTag= videoTag;
        this.sourceTag= sourceTag;
        this.allAnchors= getAllAnchors;
      }
    }

        let es6Playground = () => {
            const PI = Math.PI;
            console.log(PI);

            const a = 2;
            
            const multiply = (num) => {
                //const a = 5;
                return num * a;
            }

            const multiply = num => num * a;

            console.log(multiply(3));

            let result = (a==5?true:false);
            console.log(result);
            let choice = ""
            let result = (a==5?choice='ok':choice='not ok');
            console.log(choice);
            
            const numbers = [1,2,3,4];
            let doubleFn = (num) => {
              return num*2;
            

            //const doubled = numbers.map(doubleFn);
            //console.log(doubled);

            //const doubled = numbers.map((num) => {return num*2});
            //console.log(doubled);
            //shorter, and saves memory because not stored and used only within this function only

            const doubled = numbers.map(num => num*2);
            console.log(doubled);}
        

        let onReady = (e) => {
            //es6Playground();
            let videoFigureTag=document.getElementById('video_player');
            let videoTag=document.querySelector('#video_player video');
            let sourceTag=document.querySelector('#video_player video source');
            //let videoAllAnchors=document.getElementsByTagName("a");
            let getAllAnchors=document.querySelectorAll('#video_player figcaption a');
            //gets all a tags under the branch of #video_player figcaption a, stores in array
            //console.log(getAllAnchors);
            

            let i=5; //this let ai does not enter the for statement
            for(let i=0; i<getAllAnchors.length; i++){ //this let ai is in scope of for statement only
                //console.log(getAllAnchors[i].getAttribute('href'));
                let currentAnchor = getAllAnchors[i];
                //console.log(i);
                //console.log(currentAnchor);
                currentAnchor.addEventListener('click', onAnchorClick, false);

            }

            let videoPlayer = new VideoPlayer(videoFigureTag,videoTag,sourceTag,getAllAnchors);
            console.log(videoPlayer.videoFigureTag);
            console.log(videoPlayer.videoTag);
            console.log(videoPlayer.sourceTag);
            console.log(videoPlayer.allAnchors);
            console.log(videoPlayer);
            
            //console.log('the value of ai here is ' +i)}

            let onAnchorClick = (e) => {
                e.preventDefault();
                //prevent openning of video in new tab

                let video = document.querySelector('#video_player video');
                video.removeAttribute('controls');
                video.removeAttribute('poster');

                let currentElement = e.target; //img
                //console.log(currentElement);

                let currentLink = e.target.parentElement; //anchor
                //console.log(currentLink);

                let currentHref = currentLink.getAttribute('href');
                //console.log(currentHref);
                let source = document.querySelectorAll('#video_player video source');

                source[0].src = currentHref; 
                video.load();
                video.play();
            }
        
        window.addEventListener("load",onReady, false);

    </script>
</head>
<body>
<h1>Welcome to My Video Player</h1>
<figure id="video_player">
    <video controls poster="images/nambia1.jpg">
        <source src="./media/nambia1.mp4" type="video/mp4">
        <source src="./media/nambia1.webm" type="video/webm">
    </video>
    <figcaption>
        <a href="./media/nambia1.mp4"><img src="./images/nambia1.jpg" alt="Nambia Timelapse 1"></a>
        <a href="./media/nambia2.mp4"><img src="./images/nambia2.jpg" alt="Nambia Timelapse 2"></a>
        <a href="./media/nambia3.mp4"><img src="./images/nambia3.jpg" alt="Nambia Timelapse 3"></a>
    </figcaption>
</figure>

</body>
</html>

